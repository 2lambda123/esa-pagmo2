 <!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Utilities for gradient and hessians &#8212; pagmo 2.11 documentation</title>
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pagmo.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.11',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../../_static/logo_favico.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Generic utilities" href="../miscellanea/generic.html" />
    <link rel="prev" title="Hypervolumes" href="hypervolume.html" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto|Comfortaa|Space+Mono"> 
  </head>
  <body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html"><span><img src="../../../_static/logo_small_html.png"></span>
           </a>
        <span class="navbar-text navbar-version pull-left"><b>2.11</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../../index.html">Home</a></li>
                <li><a href="../../../install.html">Install</a></li>
                <li><a href="../../../quickstart.html">Quickstart</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">All <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installation guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#c">C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#python">Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quick start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#c">C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#python">Python</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../algorithm_list.html">List of algorithms (UDAs) available in pagmo/pygmo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../algorithm_list.html#heuristic-global-optimization">Heuristic Global Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../algorithm_list.html#local-optimization">Local optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../algorithm_list.html#meta-algorithms">Meta-algorithms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../problem_list.html">List of problems (UDPs) available in pagmo/pygmo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../problem_list.html#scalable-problems">Scalable problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../problem_list.html#problem-suites">Problem suites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../problem_list.html#meta-problems">Meta-problems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../island_list.html">List of islands (UDIs) available in pagmo/pygmo</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../cpp_docs.html">C++ Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#core-classes">Core classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-algorithms">Implemented algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-problems">Implemented problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-islands">Implemented islands</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../cpp_docs.html#utilities">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#miscellanea">Miscellanea</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../python/python_docs.html">Python Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../python/python_docs.html#core-classes">Core classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/python_docs.html#implemented-problems-algorithms-and-islands">Implemented problems, algorithms and islands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/python_docs.html#utilities">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../python/tutorials/python_tut.html">Python tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../python/tutorials/python_tut.html#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/tutorials/python_tut.html#coding-your-own-problem-udp">Coding your own problem (UDP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/tutorials/python_tut.html#meta-problems">Meta-problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/tutorials/python_tut.html#coding-your-own-island-udi">Coding your own island (UDI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/tutorials/python_tut.html#local-optimization">Local optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/tutorials/python_tut.html#multi-objective-optimization">Multi-objective optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/tutorials/python_tut.html#hypervolumes">Hypervolumes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python/tutorials/python_tut.html#advanced-examples">Advanced Examples</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../credits.html">Credits</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../credits.html#main-developers">Main developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#unreleased">2.11 (unreleased)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id1">2.10 (2019-01-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id3">2.9 (2018-08-31)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id6">2.8 (2018-07-12)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id10">2.7 (2018-04-13)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id13">2.6 (2017-11-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id15">2.5 (2017-11-12)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id17">2.4 (2017-06-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id21">2.3 (2017-05-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id24">2.2 (2017-05-12)</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">This Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Utilities for gradient and hessians</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="utilities-for-gradient-and-hessians">
<span id="cpp-gradient-utils"></span><h1>Utilities for gradient and hessians<a class="headerlink" href="#utilities-for-gradient-and-hessians" title="Permalink to this headline">¶</a></h1>
<p>A number of utilities to help with problems with gradient and hessians.</p>
<hr class="docutils" />
<dl class="function">
<dt id="_CPPv2N5pagmo17estimate_sparsityE4FuncRK13vector_doubled">
<span id="pagmo::estimate_sparsity__Func.vector_doubleCR.double"></span><em class="property">template </em>&lt;<em class="property">typename</em> Func&gt;<br /><span class="target" id="namespacepagmo_1a89858d9cbc732abffd0f9cd22bd68c16"></span><a class="reference internal" href="../types.html#_CPPv2N5pagmo16sparsity_patternE" title="pagmo::sparsity_pattern">sparsity_pattern</a> <code class="descclassname">pagmo::</code><code class="descname">estimate_sparsity</code><span class="sig-paren">(</span>Func <em>f</em>, <em class="property">const</em> <a class="reference internal" href="../types.html#_CPPv2N5pagmo13vector_doubleE" title="pagmo::vector_double">vector_double</a> &amp;<em>x</em>, double <em>dx</em> = 1e-8<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N5pagmo17estimate_sparsityE4FuncRK13vector_doubled" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Heuristic to estimate the sparsity pattern. </p>
<p>A numerical estimation of the sparsity pattern of same callable object is made by numerically computing it around a given input point and detecting the components that are changed.</p>
<p>The callable function <code class="docutils literal"><span class="pre">f</span></code> must have the prototype:</p>
<p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">vector_double</span> <span class="n">f</span><span class="p">(</span><span class="n">const</span> <span class="n">vector_double</span> <span class="o">&amp;</span><span class="p">)</span>
</pre></div>
</div>
</p>
<p>otherwise compiler errors will be generated.</p>
<p>Note that estimate_sparsity may fail to detect the real sparsity as it only considers one variation around the input point. It is of use, though, in tests or cases where its not possible to write the sparsity or where the user is confident the estimate will be correct.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>the sparsity_pattern of <code class="docutils literal"><span class="pre">f</span></code> as detected around <code class="docutils literal"><span class="pre">x</span></code>.</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">f</span></code>: instance of the callable object. </li>
<li><code class="docutils literal"><span class="pre">x</span></code>: decision vector to test the sparisty around. </li>
<li><code class="docutils literal"><span class="pre">dx</span></code>: To detect the sparsity each component of the input decision vector <code class="docutils literal"><span class="pre">x</span></code> will be changed by <span class="math">\(\max(|x_i|, 1) * \)</span> <code class="docutils literal"><span class="pre">dx</span></code>. </li>
</ul>
</dd>
<dt><strong>Exceptions</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">std::invalid_argument</span></code>: if <code class="docutils literal"><span class="pre">f</span></code> returns fitness vectors of different sizes when perturbing <code class="docutils literal"><span class="pre">x</span></code>. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<hr class="docutils" />
<dl class="function">
<dt id="_CPPv2N5pagmo17estimate_gradientE4FuncRK13vector_doubled">
<span id="pagmo::estimate_gradient__Func.vector_doubleCR.double"></span><em class="property">template </em>&lt;<em class="property">typename</em> Func&gt;<br /><span class="target" id="namespacepagmo_1a698b7c8e4ddad0637ffe6ed693dd90b8"></span><a class="reference internal" href="../types.html#_CPPv2N5pagmo13vector_doubleE" title="pagmo::vector_double">vector_double</a> <code class="descclassname">pagmo::</code><code class="descname">estimate_gradient</code><span class="sig-paren">(</span>Func <em>f</em>, <em class="property">const</em> <a class="reference internal" href="../types.html#_CPPv2N5pagmo13vector_doubleE" title="pagmo::vector_double">vector_double</a> &amp;<em>x</em>, double <em>dx</em> = 1e-8<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N5pagmo17estimate_gradientE4FuncRK13vector_doubled" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Numerical computation of the gradient (low-order) </p>
<p>A numerical estimation of the gradient of same callable function is made numerically.</p>
<p>The callable function <code class="docutils literal"><span class="pre">f</span></code> must have the prototype:</p>
<p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">vector_double</span> <span class="n">f</span><span class="p">(</span><span class="n">const</span> <span class="n">vector_double</span> <span class="o">&amp;</span><span class="p">)</span>
</pre></div>
</div>
</p>
<p>otherwise compiler errors will be generated. The gradient returned will be dense and contain, in the lexicographic order requested by <a class="reference internal" href="../problem.html#classpagmo_1_1problem_1a3fb8d8bb7b34477509eb9df3cd7b6e2e"><span class="std std-ref">pagmo::problem::gradient()</span></a>, <span class="math">\(\frac{df_i}{dx_j}\)</span>.</p>
<p>The numerical approximation of each derivative is made by central difference, according to the formula:</p>
<p><div class="math">
\[ \frac{df}{dx} \approx \frac{f(x+dx) - f(x-dx)}{2dx} + O(dx^2) \]</div>
</p>
<p>The overall cost, in terms of calls to <code class="docutils literal"><span class="pre">f</span></code> will thus be <span class="math">\(2n\)</span> where <span class="math">\(n\)</span> is the size of <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The gradient returned is assumed as dense: elements equal to zero are not excluded.</p>
</div>
 <dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>the gradient of <code class="docutils literal"><span class="pre">f</span></code> approximated around <code class="docutils literal"><span class="pre">x</span></code> in the format required by <a class="reference internal" href="../problem.html#classpagmo_1_1problem_1a3fb8d8bb7b34477509eb9df3cd7b6e2e"><span class="std std-ref">pagmo::problem::gradient()</span></a>.</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">f</span></code>: instance of the callable object. </li>
<li><code class="docutils literal"><span class="pre">x</span></code>: decision vector to test the sparisty around. </li>
<li><code class="docutils literal"><span class="pre">dx</span></code>: To detect the numerical derivative each component of the input decision vector <code class="docutils literal"><span class="pre">x</span></code> will be varied by <span class="math">\(\max(|x_i|,1) * \)</span> <code class="docutils literal"><span class="pre">dx</span></code>. </li>
</ul>
</dd>
<dt><strong>Exceptions</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">std::invalid_argument</span></code>: if <code class="docutils literal"><span class="pre">f</span></code> returns vectors of different sizes when perturbing <code class="docutils literal"><span class="pre">x</span></code>.</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<hr class="docutils" />
<dl class="function">
<dt id="_CPPv2N5pagmo19estimate_gradient_hE4FuncRK13vector_doubled">
<span id="pagmo::estimate_gradient_h__Func.vector_doubleCR.double"></span><em class="property">template </em>&lt;<em class="property">typename</em> Func&gt;<br /><span class="target" id="namespacepagmo_1a890e456701a084a01bd7810bebc9c18a"></span><a class="reference internal" href="../types.html#_CPPv2N5pagmo13vector_doubleE" title="pagmo::vector_double">vector_double</a> <code class="descclassname">pagmo::</code><code class="descname">estimate_gradient_h</code><span class="sig-paren">(</span>Func <em>f</em>, <em class="property">const</em> <a class="reference internal" href="../types.html#_CPPv2N5pagmo13vector_doubleE" title="pagmo::vector_double">vector_double</a> &amp;<em>x</em>, double <em>dx</em> = 1e-2<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv2N5pagmo19estimate_gradient_hE4FuncRK13vector_doubled" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Numerical computation of the gradient (high-order) </p>
<p>A numerical estimation of the gradient of same callable function is made numerically.</p>
<p>The callable function <code class="docutils literal"><span class="pre">f</span></code> must have the prototype:</p>
<p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">vector_double</span> <span class="n">f</span><span class="p">(</span><span class="n">const</span> <span class="n">vector_double</span> <span class="o">&amp;</span><span class="p">)</span>
</pre></div>
</div>
</p>
<p>otherwise compiler errors will be generated. The gradient returned will be dense and contain, in the lexicographic order requested by <a class="reference internal" href="../problem.html#classpagmo_1_1problem_1a3fb8d8bb7b34477509eb9df3cd7b6e2e"><span class="std std-ref">pagmo::problem::gradient()</span></a>, <span class="math">\(\frac{df_i}{dx_j}\)</span>.</p>
<p>The numerical approximation of each derivative is made by central difference, according to the formula:</p>
<p><div class="math">
\[ \frac{df}{dx} \approx \frac 32 m_1 - \frac 35 m_2 +\frac 1{10} m_3 + O(dx^6) \]</div>
</p>
<p>where:</p>
<p><div class="math">
\[ m_i = \frac{f(x + i dx) - f(x-i dx)}{2i dx} \]</div>
</p>
<p>The overall cost, in terms of calls to <code class="docutils literal"><span class="pre">f</span></code> will thus be <span class="math">\(6n\)</span> where <span class="math">\(n\)</span> is the size of <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The gradient returned is assumed as dense: elements equal to zero are not excluded.</p>
</div>
 <dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>the gradient of <code class="docutils literal"><span class="pre">f</span></code> approximated around <code class="docutils literal"><span class="pre">x</span></code> in the format required by <a class="reference internal" href="../problem.html#classpagmo_1_1problem_1a3fb8d8bb7b34477509eb9df3cd7b6e2e"><span class="std std-ref">pagmo::problem::gradient()</span></a>.</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">f</span></code>: instance of the callable object. </li>
<li><code class="docutils literal"><span class="pre">x</span></code>: decision vector to test the sparisty around. </li>
<li><code class="docutils literal"><span class="pre">dx</span></code>: To detect the numerical derivative each component of the input decision vector <code class="docutils literal"><span class="pre">x</span></code> will be varied by <span class="math">\(\max(|x_i|,1) * \)</span> <code class="docutils literal"><span class="pre">dx</span></code>. </li>
</ul>
</dd>
<dt><strong>Exceptions</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">std::invalid_argument</span></code>: if <code class="docutils literal"><span class="pre">f</span></code> returns vectors of different sizes when perturbing <code class="docutils literal"><span class="pre">x</span></code>.</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017-2018, pagmo development team.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>
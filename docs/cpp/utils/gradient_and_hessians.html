 

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Utilities for gradient and hessians &mdash; pagmo 2.17.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/logo_favico.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Genetic Operators" href="genetic_operators.html" />
    <link rel="prev" title="Hypervolumes" href="hypervolume.html" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto|Comfortaa|Space+Mono"> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> pagmo
          

          
          </a>

          
            
            
              <div class="version">
                2.17.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/cpp_tut.html">C++ tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../cpp_docs.html">C++ API documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#core-classes">Core classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-algorithms">Implemented algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-problems">Implemented problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-islands">Implemented islands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-batch-evaluators">Implemented batch evaluators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-topologies">Implemented topologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-replacement-policies">Implemented replacement policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-selection-policies">Implemented selection policies</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../cpp_docs.html#utilities">Utilities</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="multi_objective.html">Multi-objective optimization utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="constrained.html">Constrained optimization utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="discrepancy.html">Low-discrepancy sequences</a></li>
<li class="toctree-l3"><a class="reference internal" href="hypervolume.html">Hypervolumes</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Utilities for gradient and hessians</a></li>
<li class="toctree-l3"><a class="reference internal" href="genetic_operators.html">Genetic Operators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#miscellanea">Miscellanea</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">pagmo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../cpp_docs.html">C++ API documentation</a> &raquo;</li>
        
      <li>Utilities for gradient and hessians</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/docs/cpp/utils/gradient_and_hessians.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="utilities-for-gradient-and-hessians">
<span id="cpp-gradient-utils"></span><h1>Utilities for gradient and hessians<a class="headerlink" href="#utilities-for-gradient-and-hessians" title="Permalink to this headline">¶</a></h1>
<p>A number of utilities to help with problems with gradient and hessians.</p>
<hr class="docutils" />
<dl class="cpp function">
<dt id="_CPPv4I0EN5pagmo17estimate_sparsityE16sparsity_pattern4FuncRK13vector_doubled">
<span id="_CPPv3I0EN5pagmo17estimate_sparsityE4FuncRK13vector_doubled"></span><span id="_CPPv2I0EN5pagmo17estimate_sparsityE4FuncRK13vector_doubled"></span><span class="pre">template&lt;</span><span class="pre">typename</span> <code class="sig-name descname"><span class="pre">Func</span></code><span class="pre">&gt;</span><br /><span class="target" id="namespacepagmo_1a89858d9cbc732abffd0f9cd22bd68c16"></span><a class="reference internal" href="../types.html#_CPPv4N5pagmo16sparsity_patternE" title="pagmo::sparsity_pattern"><span class="pre">sparsity_pattern</span></a> <code class="sig-prename descclassname"><span class="pre">pagmo</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">estimate_sparsity</span></code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0EN5pagmo17estimate_sparsityE16sparsity_pattern4FuncRK13vector_doubled" title="pagmo::estimate_sparsity::Func"><span class="pre">Func</span></a> <em><span class="pre">f</span></em>, <em class="property"><span class="pre">const</span></em> <a class="reference internal" href="../types.html#_CPPv4N5pagmo13vector_doubleE" title="pagmo::vector_double"><span class="pre">vector_double</span></a> <span class="pre">&amp;</span><em><span class="pre">x</span></em>, <span class="pre">double</span> <em><span class="pre">dx</span></em> <span class="pre">=</span> <span class="pre">1e-8</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0EN5pagmo17estimate_sparsityE16sparsity_pattern4FuncRK13vector_doubled" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Heuristic to estimate the sparsity pattern. </p>
<p>A numerical estimation of the sparsity pattern of same callable object is made by numerically computing it around a given input point and detecting the components that are changed.</p>
<p>The callable function <code class="docutils literal notranslate"><span class="pre">f</span></code> must have the prototype:</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vector_double</span> <span class="n">f</span><span class="p">(</span><span class="n">const</span> <span class="n">vector_double</span> <span class="o">&amp;</span><span class="p">)</span>
</pre></div>
</div>
</p>
<p>otherwise compiler errors will be generated.</p>
<p>Note that estimate_sparsity may fail to detect the real sparsity as it only considers one variation around the input point. It is of use, though, in tests or cases where its not possible to write the sparsity or where the user is confident the estimate will be correct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – instance of the callable object. </p></li>
<li><p><strong>x</strong> – decision vector to test the sparisty around. </p></li>
<li><p><strong>dx</strong> – To detect the sparsity each component of the input decision vector <code class="docutils literal notranslate"><span class="pre">x</span></code> will be changed by <span class="math notranslate nohighlight">\(\max(|x_i|, 1) * \)</span> <code class="docutils literal notranslate"><span class="pre">dx</span></code>. </p></li>
</ul>
</dd>
<dt class="field-even">Throws</dt>
<dd class="field-even"><p><strong>std::invalid_argument</strong> – if <code class="docutils literal notranslate"><span class="pre">f</span></code> returns fitness vectors of different sizes when perturbing <code class="docutils literal notranslate"><span class="pre">x</span></code>. </p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the sparsity_pattern of <code class="docutils literal notranslate"><span class="pre">f</span></code> as detected around <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="cpp function">
<dt id="_CPPv4I0EN5pagmo17estimate_gradientE13vector_double4FuncRK13vector_doubled">
<span id="_CPPv3I0EN5pagmo17estimate_gradientE4FuncRK13vector_doubled"></span><span id="_CPPv2I0EN5pagmo17estimate_gradientE4FuncRK13vector_doubled"></span><span class="pre">template&lt;</span><span class="pre">typename</span> <code class="sig-name descname"><span class="pre">Func</span></code><span class="pre">&gt;</span><br /><span class="target" id="namespacepagmo_1a698b7c8e4ddad0637ffe6ed693dd90b8"></span><a class="reference internal" href="../types.html#_CPPv4N5pagmo13vector_doubleE" title="pagmo::vector_double"><span class="pre">vector_double</span></a> <code class="sig-prename descclassname"><span class="pre">pagmo</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">estimate_gradient</span></code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0EN5pagmo17estimate_gradientE13vector_double4FuncRK13vector_doubled" title="pagmo::estimate_gradient::Func"><span class="pre">Func</span></a> <em><span class="pre">f</span></em>, <em class="property"><span class="pre">const</span></em> <a class="reference internal" href="../types.html#_CPPv4N5pagmo13vector_doubleE" title="pagmo::vector_double"><span class="pre">vector_double</span></a> <span class="pre">&amp;</span><em><span class="pre">x</span></em>, <span class="pre">double</span> <em><span class="pre">dx</span></em> <span class="pre">=</span> <span class="pre">1e-8</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0EN5pagmo17estimate_gradientE13vector_double4FuncRK13vector_doubled" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Numerical computation of the gradient (low-order) </p>
<p>A numerical estimation of the gradient of same callable function is made numerically.</p>
<p>The callable function <code class="docutils literal notranslate"><span class="pre">f</span></code> must have the prototype:</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vector_double</span> <span class="n">f</span><span class="p">(</span><span class="n">const</span> <span class="n">vector_double</span> <span class="o">&amp;</span><span class="p">)</span>
</pre></div>
</div>
</p>
<p>otherwise compiler errors will be generated. The gradient returned will be dense and contain, in the lexicographic order requested by <a class="reference internal" href="../problem.html#classpagmo_1_1problem_1a6b32562f79be8440f9d1b493c3f33869"><span class="std std-ref">pagmo::problem::gradient()</span></a>, <span class="math notranslate nohighlight">\(\frac{df_i}{dx_j}\)</span>.</p>
<p>The numerical approximation of each derivative is made by central difference, according to the formula:</p>
<p><div class="math notranslate nohighlight">
\[ \frac{df}{dx} \approx \frac{f(x+dx) - f(x-dx)}{2dx} + O(dx^2) \]</div>
</p>
<p>The overall cost, in terms of calls to <code class="docutils literal notranslate"><span class="pre">f</span></code> will thus be <span class="math notranslate nohighlight">\(2n\)</span> where <span class="math notranslate nohighlight">\(n\)</span> is the size of <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p><p></p>
 </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The gradient returned is assumed as dense: elements equal to zero are not excluded.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – instance of the callable object. </p></li>
<li><p><strong>x</strong> – decision vector to test the sparisty around. </p></li>
<li><p><strong>dx</strong> – To detect the numerical derivative each component of the input decision vector <code class="docutils literal notranslate"><span class="pre">x</span></code> will be varied by <span class="math notranslate nohighlight">\(\max(|x_i|,1) * \)</span> <code class="docutils literal notranslate"><span class="pre">dx</span></code>. </p></li>
</ul>
</dd>
<dt class="field-even">Throws</dt>
<dd class="field-even"><p><strong>std::invalid_argument</strong> – if <code class="docutils literal notranslate"><span class="pre">f</span></code> returns vectors of different sizes when perturbing <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the gradient of <code class="docutils literal notranslate"><span class="pre">f</span></code> approximated around <code class="docutils literal notranslate"><span class="pre">x</span></code> in the format required by <a class="reference internal" href="../problem.html#classpagmo_1_1problem_1a6b32562f79be8440f9d1b493c3f33869"><span class="std std-ref">pagmo::problem::gradient()</span></a>.</p>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="cpp function">
<dt id="_CPPv4I0EN5pagmo19estimate_gradient_hE13vector_double4FuncRK13vector_doubled">
<span id="_CPPv3I0EN5pagmo19estimate_gradient_hE4FuncRK13vector_doubled"></span><span id="_CPPv2I0EN5pagmo19estimate_gradient_hE4FuncRK13vector_doubled"></span><span class="pre">template&lt;</span><span class="pre">typename</span> <code class="sig-name descname"><span class="pre">Func</span></code><span class="pre">&gt;</span><br /><span class="target" id="namespacepagmo_1a890e456701a084a01bd7810bebc9c18a"></span><a class="reference internal" href="../types.html#_CPPv4N5pagmo13vector_doubleE" title="pagmo::vector_double"><span class="pre">vector_double</span></a> <code class="sig-prename descclassname"><span class="pre">pagmo</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">estimate_gradient_h</span></code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0EN5pagmo19estimate_gradient_hE13vector_double4FuncRK13vector_doubled" title="pagmo::estimate_gradient_h::Func"><span class="pre">Func</span></a> <em><span class="pre">f</span></em>, <em class="property"><span class="pre">const</span></em> <a class="reference internal" href="../types.html#_CPPv4N5pagmo13vector_doubleE" title="pagmo::vector_double"><span class="pre">vector_double</span></a> <span class="pre">&amp;</span><em><span class="pre">x</span></em>, <span class="pre">double</span> <em><span class="pre">dx</span></em> <span class="pre">=</span> <span class="pre">1e-2</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0EN5pagmo19estimate_gradient_hE13vector_double4FuncRK13vector_doubled" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Numerical computation of the gradient (high-order) </p>
<p>A numerical estimation of the gradient of same callable function is made numerically.</p>
<p>The callable function <code class="docutils literal notranslate"><span class="pre">f</span></code> must have the prototype:</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vector_double</span> <span class="n">f</span><span class="p">(</span><span class="n">const</span> <span class="n">vector_double</span> <span class="o">&amp;</span><span class="p">)</span>
</pre></div>
</div>
</p>
<p>otherwise compiler errors will be generated. The gradient returned will be dense and contain, in the lexicographic order requested by <a class="reference internal" href="../problem.html#classpagmo_1_1problem_1a6b32562f79be8440f9d1b493c3f33869"><span class="std std-ref">pagmo::problem::gradient()</span></a>, <span class="math notranslate nohighlight">\(\frac{df_i}{dx_j}\)</span>.</p>
<p>The numerical approximation of each derivative is made by central difference, according to the formula:</p>
<p><div class="math notranslate nohighlight">
\[ \frac{df}{dx} \approx \frac 32 m_1 - \frac 35 m_2 +\frac 1{10} m_3 + O(dx^6) \]</div>
</p>
<p>where:</p>
<p><div class="math notranslate nohighlight">
\[ m_i = \frac{f(x + i dx) - f(x-i dx)}{2i dx} \]</div>
</p>
<p>The overall cost, in terms of calls to <code class="docutils literal notranslate"><span class="pre">f</span></code> will thus be <span class="math notranslate nohighlight">\(6n\)</span> where <span class="math notranslate nohighlight">\(n\)</span> is the size of <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p><p></p>
 </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The gradient returned is assumed as dense: elements equal to zero are not excluded.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – instance of the callable object. </p></li>
<li><p><strong>x</strong> – decision vector to test the sparisty around. </p></li>
<li><p><strong>dx</strong> – To detect the numerical derivative each component of the input decision vector <code class="docutils literal notranslate"><span class="pre">x</span></code> will be varied by <span class="math notranslate nohighlight">\(\max(|x_i|,1) * \)</span> <code class="docutils literal notranslate"><span class="pre">dx</span></code>. </p></li>
</ul>
</dd>
<dt class="field-even">Throws</dt>
<dd class="field-even"><p><strong>std::invalid_argument</strong> – if <code class="docutils literal notranslate"><span class="pre">f</span></code> returns vectors of different sizes when perturbing <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the gradient of <code class="docutils literal notranslate"><span class="pre">f</span></code> approximated around <code class="docutils literal notranslate"><span class="pre">x</span></code> in the format required by <a class="reference internal" href="../problem.html#classpagmo_1_1problem_1a6b32562f79be8440f9d1b493c3f33869"><span class="std std-ref">pagmo::problem::gradient()</span></a>.</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="genetic_operators.html" class="btn btn-neutral float-right" title="Genetic Operators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="hypervolume.html" class="btn btn-neutral float-left" title="Hypervolumes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017-2020, pagmo development team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
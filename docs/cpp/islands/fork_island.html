 

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Fork island &mdash; pagmo 2.18.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/logo_favico.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Default BFE" href="../batch_evaluators/default_bfe.html" />
    <link rel="prev" title="Thread island" href="thread_island.html" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto|Comfortaa|Space+Mono"> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> pagmo
          

          
          </a>

          
            
            
              <div class="version">
                2.18.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/cpp_tut.html">C++ tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../cpp_docs.html">C++ API documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#core-classes">Core classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-algorithms">Implemented algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-problems">Implemented problems</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../cpp_docs.html#implemented-islands">Implemented islands</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="thread_island.html">Thread island</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Fork island</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-batch-evaluators">Implemented batch evaluators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-topologies">Implemented topologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-replacement-policies">Implemented replacement policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#implemented-selection-policies">Implemented selection policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#utilities">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpp_docs.html#miscellanea">Miscellanea</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">pagmo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../cpp_docs.html">C++ API documentation</a> &raquo;</li>
        
      <li>Fork island</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/docs/cpp/islands/fork_island.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fork-island">
<h1>Fork island<a class="headerlink" href="#fork-island" title="Permalink to this headline">¶</a></h1>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.9.</span></p>
</div>
<p><em>#include &lt;pagmo/islands/fork_island.hpp&gt;</em></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#_CPPv4N5pagmo11fork_islandE" title="pagmo::fork_island"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fork_island</span></code></a> class is available only on POSIX platforms (e.g., Linux, OSX,
the BSDs, but <em>not</em> Microsoft Windows, unless some POSIX compatibility layer has been installed
on the system).</p>
</div>
<dl class="cpp class">
<dt id="_CPPv4N5pagmo11fork_islandE">
<span id="_CPPv3N5pagmo11fork_islandE"></span><span id="_CPPv2N5pagmo11fork_islandE"></span><span id="pagmo::fork_island"></span><em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">fork_island</span></code><a class="headerlink" href="#_CPPv4N5pagmo11fork_islandE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>This user-defined island (UDI) will use the POSIX <code class="docutils literal notranslate"><span class="pre">fork()</span></code> system call to offload the evolution
of a population to a child process.</p>
<p>Generally speaking, users are encouraged to use <a class="reference internal" href="thread_island.html#_CPPv4N5pagmo13thread_islandE" title="pagmo::thread_island"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">thread_island</span></code></a> rather than
<a class="reference internal" href="#_CPPv4N5pagmo11fork_islandE" title="pagmo::fork_island"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fork_island</span></code></a>: <a class="reference internal" href="thread_island.html#_CPPv4N5pagmo13thread_islandE" title="pagmo::thread_island"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">thread_island</span></code></a> performs better,
it works also with problems and algorithms which are not serialisable, and it is available on all
platforms.</p>
<p><a class="reference internal" href="#_CPPv4N5pagmo11fork_islandE" title="pagmo::fork_island"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fork_island</span></code></a> should however be preferred when dealing with problems and algorithms
which do not offer the basic <a class="reference internal" href="../miscellanea/type_traits.html#_CPPv4N5pagmo13thread_safetyE" title="pagmo::thread_safety"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">thread_safety</span></code></a> guarantee. By offloading the optimisation
to a separate process (rather than a separate thread), <a class="reference internal" href="#_CPPv4N5pagmo11fork_islandE" title="pagmo::fork_island"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fork_island</span></code></a> can ensure
that thread-unsafe problems and algorithms are always run in only one thread at a time.
This capability is particularly useful when wrapping in pagmo third-party code which does not support execution
in multithreaded contexts (a notable example is the <a class="reference internal" href="../algorithms/ipopt.html#_CPPv4N5pagmo5ipoptE" title="pagmo::ipopt"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ipopt</span></code></a> algorithm,
which uses the thread-unsafe Ipopt optimiser).</p>
<p><a class="reference internal" href="#_CPPv4N5pagmo11fork_islandE" title="pagmo::fork_island"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fork_island</span></code></a> is the UDI type automatically selected by the constructors of <a class="reference internal" href="../island.html#_CPPv4N5pagmo6islandE" title="pagmo::island"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">island</span></code></a>
on POSIX platforms when the island’s problem and/or algorithm do not provide the basic <a class="reference internal" href="../miscellanea/type_traits.html#_CPPv4N5pagmo13thread_safetyE" title="pagmo::thread_safety"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">thread_safety</span></code></a>
guarantee.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using memory checking tools such as valgrind, or the address/memory sanitizers from GCC/clang, be aware
that memory leaks in the child process may be flagged by such tools. These are spurious warnings due to the
fact that the child process is exited via <code class="docutils literal notranslate"><span class="pre">std::exit()</span></code> (which does not invoke the destructors
of objects with automatic storage duration). Thus, such warnings can be safely ignored.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ability of the forked process to handle errors raised during evolution is dependent on the
specific <code class="docutils literal notranslate"><span class="pre">fork()</span></code> implementation in use. For instance, it has been reported that on recent OSX versions
(i.e., since High Sierra), error handling in the forked process does not work, possibly because it employs
code which is not <a class="reference external" href="http://man7.org/linux/man-pages/man7/signal-safety.7.html">asynchronous-safe</a>.</p>
</div>
<dl class="cpp function">
<dt id="_CPPv4N5pagmo11fork_island11fork_islandEv">
<span id="_CPPv3N5pagmo11fork_island11fork_islandEv"></span><span id="_CPPv2N5pagmo11fork_island11fork_islandEv"></span><span id="pagmo::fork_island::fork_island"></span><code class="sig-name descname"><span class="pre">fork_island</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5pagmo11fork_island11fork_islandEv" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5pagmo11fork_island11fork_islandERK11fork_island">
<span id="_CPPv3N5pagmo11fork_island11fork_islandERK11fork_island"></span><span id="_CPPv2N5pagmo11fork_island11fork_islandERK11fork_island"></span><span id="pagmo::fork_island::fork_island__fork_islandCR"></span><code class="sig-name descname"><span class="pre">fork_island</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <a class="reference internal" href="#_CPPv4N5pagmo11fork_island11fork_islandERK11fork_island" title="pagmo::fork_island::fork_island"><span class="pre">fork_island</span></a><span class="pre">&amp;</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5pagmo11fork_island11fork_islandERK11fork_island" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5pagmo11fork_island11fork_islandERR11fork_island">
<span id="_CPPv3N5pagmo11fork_island11fork_islandERR11fork_island"></span><span id="_CPPv2N5pagmo11fork_island11fork_islandERR11fork_island"></span><span id="pagmo::fork_island::fork_island__fork_islandRR"></span><code class="sig-name descname"><span class="pre">fork_island</span></code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N5pagmo11fork_island11fork_islandERR11fork_island" title="pagmo::fork_island::fork_island"><span class="pre">fork_island</span></a><span class="pre">&amp;</span><span class="pre">&amp;</span><span class="sig-paren">)</span> <em class="property"><span class="pre">noexcept</span></em><a class="headerlink" href="#_CPPv4N5pagmo11fork_island11fork_islandERR11fork_island" title="Permalink to this definition">¶</a><br /></dt>
<dd><p><a class="reference internal" href="#_CPPv4N5pagmo11fork_islandE" title="pagmo::fork_island"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fork_island</span></code></a> is default, copy and move-constructible. The copy and move constructor are equivalent
to the default constructor.</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5pagmo11fork_island10run_evolveER6island">
<span id="_CPPv3NK5pagmo11fork_island10run_evolveER6island"></span><span id="_CPPv2NK5pagmo11fork_island10run_evolveER6island"></span><span id="pagmo::fork_island::run_evolve__islandRC"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">run_evolve</span></code><span class="sig-paren">(</span><a class="reference internal" href="../island.html#_CPPv4N5pagmo6islandE" title="pagmo::island"><span class="pre">island</span></a> <span class="pre">&amp;</span><em><span class="pre">isl</span></em><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK5pagmo11fork_island10run_evolveER6island" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>This method will fork the calling process, and, in the child process, the <a class="reference internal" href="../population.html#_CPPv4N5pagmo10populationE" title="pagmo::population"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">population</span></code></a> of <em>isl</em> will be
evolved using the <a class="reference internal" href="../algorithm.html#_CPPv4N5pagmo9algorithmE" title="pagmo::algorithm"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">algorithm</span></code></a> of <em>isl</em>. At the end of the evolution, the evolved population and the
algorithm used for the evolution will be sent back to the parent process, where they will replace, in <em>isl</em>, the original
population and algorithm. The child process will then terminate via <code class="docutils literal notranslate"><span class="pre">std::exit(0)</span></code>.</p>
<p>If any exception is raised during the evolution, the error message from the exception will be transferred back to the parent
process, where a <code class="docutils literal notranslate"><span class="pre">std::runtime_error</span></code> containing the error message from the child will be raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>isl</strong> – the <a class="reference internal" href="../island.html#_CPPv4N5pagmo6islandE" title="pagmo::island"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">island</span></code></a> that will be evolved.</p>
</dd>
<dt class="field-even">Throws</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>std::runtime_error</strong> – if any error arises from the use of POSIX primitives (<code class="docutils literal notranslate"><span class="pre">fork()</span></code>, pipes, etc.), or if any
error is generated in the child process.</p></li>
<li><p><strong>unspecified</strong> – <p>any exception raised by:</p>
<ul>
<li><p>the serialisation of <a class="reference internal" href="../population.html#_CPPv4N5pagmo10populationE" title="pagmo::population"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">population</span></code></a> or <a class="reference internal" href="../algorithm.html#_CPPv4N5pagmo9algorithmE" title="pagmo::algorithm"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">algorithm</span></code></a>,</p></li>
<li><p><a class="reference internal" href="../island.html#_CPPv4N5pagmo6island14set_populationERK10population" title="pagmo::island::set_population"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">pagmo::island::set_population()</span></code></a> or <a class="reference internal" href="../island.html#_CPPv4N5pagmo6island13set_algorithmERK9algorithm" title="pagmo::island::set_algorithm"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">pagmo::island::set_algorithm()</span></code></a>.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5pagmo11fork_island8get_nameEv">
<span id="_CPPv3NK5pagmo11fork_island8get_nameEv"></span><span id="_CPPv2NK5pagmo11fork_island8get_nameEv"></span><span id="pagmo::fork_island::get_nameC"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-name descname"><span class="pre">get_name</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK5pagmo11fork_island8get_nameEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the string <code class="docutils literal notranslate"><span class="pre">&quot;Fork</span> <span class="pre">island&quot;</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5pagmo11fork_island14get_extra_infoEv">
<span id="_CPPv3NK5pagmo11fork_island14get_extra_infoEv"></span><span id="_CPPv2NK5pagmo11fork_island14get_extra_infoEv"></span><span id="pagmo::fork_island::get_extra_infoC"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-name descname"><span class="pre">get_extra_info</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK5pagmo11fork_island14get_extra_infoEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>if an evolution is ongoing, this method will return a string
representation of the ID of the child process. Otherwise, the <code class="docutils literal notranslate"><span class="pre">&quot;No</span> <span class="pre">active</span> <span class="pre">child&quot;</span></code> string will be returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5pagmo11fork_island13get_child_pidEv">
<span id="_CPPv3NK5pagmo11fork_island13get_child_pidEv"></span><span id="_CPPv2NK5pagmo11fork_island13get_child_pidEv"></span><span id="pagmo::fork_island::get_child_pidC"></span><span class="pre">pid_t</span> <code class="sig-name descname"><span class="pre">get_child_pid</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK5pagmo11fork_island13get_child_pidEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a signed integral value representing the process ID of the child process, if an evolution is ongoing. Otherwise,
<code class="docutils literal notranslate"><span class="pre">0</span></code> will be returned.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../batch_evaluators/default_bfe.html" class="btn btn-neutral float-right" title="Default BFE" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="thread_island.html" class="btn btn-neutral float-left" title="Thread island" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017-2020, pagmo development team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>